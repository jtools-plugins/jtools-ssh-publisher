<idea-plugin>
    <id>com.lhstack.ssh-publisher</id>
    <name>JTools SSH Publisher</name>
    <version>1.1.8</version>
    <vendor email="lhstack@foxmail.com" url="https://github.com/lhstack">lhstack</vendor>

    <description><![CDATA[
    <p>A powerful SSH client plugin for IntelliJ IDEA with terminal, file browser, and batch upload capabilities.</p>

    <p>功能强大的 SSH 客户端插件，支持终端、文件浏览器和批量上传功能。</p>
    <h3>
    <a href="https://github.com/jtools-plugins/jtools-ssh-publisher">Source Code</a> / <a href="https://github.com/jtools-plugins/jtools-ssh-publisher">源码</a>
    </h3>

    <h3>Features / 功能特性</h3>

    <h4>SSH Connection / SSH 连接</h4>
    <ul>
        <li>Password & private key authentication / 密码和密钥认证</li>
        <li>Use local key (~/.ssh/id_rsa) / 使用本地默认密钥</li>
        <li>Load key from file picker / 从文件选择器加载密钥</li>
        <li>Connection testing / 连接测试</li>
        <li>Heartbeat keep-alive / 心跳保活</li>
        <li><b>Pre/Post scripts with list+editor UI / 前置/后置脚本（列表+编辑器方式）</b></li>
        <li><b>Non-modal edit dialog / 非模态编辑对话框</b></li>
    </ul>

    <h4>Terminal / 终端</h4>
    <ul>
        <li>JediTerm-based emulator / 基于 JediTerm</li>
        <li>IDEA theme adaptation / 适配 IDEA 主题</li>
        <li>Chinese font support / 中文支持</li>
        <li>Tab drag reorder / Tab 拖拽排序</li>
        <li>Cross-container Tab drag & drop / 跨容器 Tab 拖拽移动</li>
        <li>Split view (right/down) / 分屏显示</li>
        <li>Unlimited split nesting / 无限层级分屏</li>
        <li>Focus-based Tab placement / 基于焦点添加新 Tab</li>
        <li>System monitor bar (CPU/Memory/Disk/Process) / 系统监控状态栏</li>
    </ul>

    <h4>File Browser (SFTP) / 文件浏览器</h4>
    <ul>
        <li>Remote file explorer / 远程文件浏览</li>
        <li>Upload/Download with progress / 上传下载带进度</li>
        <li>Create folder & file / 新建文件夹和文件</li>
        <li>Rename, delete / 重命名、删除</li>
        <li>Double-click to edit in IDEA / 双击在 IDEA 中编辑</li>
        <li>Auto-sync on save with notification / 保存时自动同步（带通知）</li>
        <li>Auto-reconnect on disconnect / 断线自动重连</li>
        <li>IDEA Local History support / 支持本地历史记录</li>
        <li>Download file rename detection / 下载文件重名检测</li>
        <li>System monitor bar (CPU/Memory/Disk/Process) / 系统监控状态栏</li>
        <li>File properties view / 文件属性查看</li>
        <li>Quick search / 快速搜索</li>
    </ul>

    <h4>Transfer Management / 传输管理</h4>
    <ul>
        <li>Unified upload/download management / 统一上传下载管理</li>
        <li>Independent SSH connection per task / 每个任务独立连接</li>
        <li>Stop task with cleanup / 停止任务并清理未完成文件</li>
        <li>Task details (scripts & logs) / 任务详情（脚本和日志）</li>
        <li>Retry, delete, batch operations / 重试、删除、批量操作</li>
    </ul>

    <h4>Batch Upload / 批量上传</h4>
    <ul>
        <li><b>Multi-file upload to multiple servers / 多文件上传到多台服务器</b></li>
        <li><b>Independent config per file (server, path, scripts) / 每个文件独立配置</b></li>
        <li>Upload queue management / 上传队列管理</li>
        <li>Pre/Post scripts / 前置/后置脚本</li>
        <li>Temporary scripts / 临时脚本</li>
        <li>Custom remote filename / 自定义远程文件名</li>
    </ul>

    <h4>Config Management / 配置管理</h4>
    <ul>
        <li><b>Export all or selected configs / 导出全部或选择性导出</b></li>
        <li><b>Import with overwrite/skip option / 导入支持覆盖或跳过</b></li>
        <li><b>Preserve expand state on refresh / 刷新时保持展开状态</b></li>
    </ul>

    <h4>Data Storage / 数据存储</h4>
    <p>SQLite: ~/.jtools/jtools-ssh-publisher/db.data</p>
    ]]></description>

    <change-notes><![CDATA[
    <b>1.1.8</b>
    <ul>
        <li>新增：配置导出/导入功能（支持全部导出或选择性导出）</li>
        <li>新增：批量上传增强（多文件独立配置目标服务器、远程路径和脚本）</li>
        <li>优化：SSH连接编辑对话框改为非模态</li>
        <li>优化：前置/后置脚本编辑改为列表+编辑器方式</li>
        <li>优化：刷新SSH连接列表时保持展开状态</li>
        <li>修复：全部展开/全部收起按钮功能</li>
        <li>修复：上传任务添加成功提示不显示的问题</li>
        <li>修复：关闭插件窗口后重新打开，传输任务无法执行的问题</li>
    </ul>

    <b>1.1.7</b>
    <ul>
        <li>新增：跨分屏容器 Tab 拖拽移动</li>
        <li>新增：跨容器拖拽支持指定位置插入</li>
        <li>新增：拖拽时目标容器高亮提示</li>
        <li>新增：基于焦点确定新 Tab 添加位置</li>
        <li>修复：新建终端/文件系统未添加到焦点容器的问题</li>
    </ul>

    <b>1.1.6</b>
    <ul>
        <li>新增：系统监控状态栏（SSH终端和文件系统底部显示CPU/内存/磁盘/进程数）</li>
        <li>新增：每5秒自动刷新系统监控数据</li>
        <li>新增：资源使用超阈值时显示警告颜色</li>
        <li>新增：支持使用本地默认密钥（~/.ssh/id_rsa）</li>
        <li>新增：支持从文件选择器加载任意密钥文件（PEM/二进制格式）</li>
        <li>优化：认证方式切换时动态调整面板高度</li>
        <li>优化：用户名字段移至公共区域，两种认证方式共享</li>
    </ul>

    <b>1.1.5</b>
    <ul>
        <li>新增：系统监控状态栏（SSH终端和文件系统底部显示CPU/内存/磁盘/进程数）</li>
        <li>新增：每5秒自动刷新系统监控数据</li>
        <li>新增：资源使用超阈值时显示警告颜色</li>
        <li>新增：支持使用本地默认密钥（~/.ssh/id_rsa）</li>
        <li>新增：支持从文件选择器加载任意密钥文件（PEM/二进制格式）</li>
        <li>优化：认证方式切换时动态调整面板高度</li>
        <li>优化：用户名字段移至公共区域，两种认证方式共享</li>
    </ul>

    <b>1.1.4</b>
    <ul>
        <li>新增：传输管理（统一管理上传和下载任务）</li>
        <li>新增：每个传输任务使用独立 SSH 连接</li>
        <li>新增：停止上传任务时自动删除远程未完成文件</li>
        <li>新增：停止下载任务时自动删除本地未完成文件</li>
        <li>新增：任务详情查看（前置脚本、后置脚本、执行日志）</li>
        <li>新增：下载文件时检测重名（覆盖/重命名/取消）</li>
        <li>新增：文件同步成功通知提示</li>
        <li>新增：SFTP 连接断开时自动重连</li>
        <li>新增：关闭文件系统 Tab 时自动关闭所有打开的远程文件编辑器</li>
        <li>优化：文件保存同步路径匹配</li>
    </ul>

    <b>1.1.3</b>
    <ul>
        <li>新增：双击远程文件在 IDEA 编辑器中打开编辑</li>
        <li>新增：编辑保存后自动同步到远程服务器</li>
        <li>新增：支持 IDEA 本地历史记录（Local History）</li>
        <li>新增：新建文件功能</li>
        <li>优化：删除远程文件时同步删除本地缓存</li>
    </ul>

    <b>1.1.2</b>
    <ul>
        <li>新增：SFTP 文件浏览器</li>
        <li>新增：文件上传/下载进度显示</li>
        <li>新增：Tab 拖拽排序</li>
        <li>新增：Tab 右键分屏（向右/向下拆分）</li>
        <li>新增：文件快速搜索</li>
        <li>新增：文件属性查看（大小、权限、时间）</li>
        <li>优化：工具栏使用 ActionToolbar</li>
        <li>优化：文件列表懒加载</li>
    </ul>

    <b>1.1.1</b>
    <ul>
        <li>新增：批量上传到多台服务器</li>
        <li>新增：每个服务器独立选择脚本</li>
        <li>新增：上传任务停止、重试功能</li>
        <li>新增：临时脚本支持</li>
        <li>修复：任务ID冲突问题</li>
    </ul>

    <b>1.1.0</b>
    <ul>
        <li>新增：上传队列管理</li>
        <li>新增：心跳保活机制</li>
        <li>新增：自定义远程文件名</li>
    </ul>

    <b>1.0.0</b>
    <ul>
        <li>初始版本</li>
    </ul>
    ]]></change-notes>

    <idea-version since-build="223" until-build="253.*"/>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.terminal</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="SSH Publisher"
                    secondary="true"
                    anchor="right"
                    icon="/pluginTabIcon.svg"
                    factoryClass="com.lhstack.ssh.SshToolWindowFactory"/>
    </extensions>
</idea-plugin>
